import{s as $,f as l,j as A,k as E,o as n,c,e as d,g as P,w as i,d as k,t as f,h as m,a as r,b as a,r as g}from"./index-0d440acb.js";import{a as R,_ as j}from"./Alert-82e7b876.js";import{u as w}from"./users-6b2e9ec9.js";const M={class:"bg-white flex flex-col gap-12 py-8 px-12 min-h-[300px] rounded-md shadow-md"},O={class:"flex justify-between items-center"},z=r("h3",{class:"text-slate-500 text-2xl font-medium text-left"},"User Management",-1),F={class:"flex flex-col items-start gap-4"},q={class:"w-full"},G={class:"flex gap-2"},H={key:0,disabled:"",class:"border-2 border-gray-300 p-1 rounded text-gray-500 hover:bg-gray-200"},J=["disabled","onClick"],ee={__name:"UserList",setup(K){const{data:_,loading:U,error:h,deleteUserError:Q,deleteUserLoading:D}=$(w()),{loadUsers:V,deleteUser:C}=w(),B=l(""),v=l([]),b=l([]),x=l(0),s=l({"filter[all]":"",page:1,rowsPerPage:10}),p=async()=>{await V(s.value),b.value=_.value.data,x.value=_.value.total};p(),A(s,t=>{p()},{deep:!0});const T=[{text:"ID",value:"id"},{text:"Username",value:"username"},{text:"Email Address",value:"email"},{text:"Phone",value:"phone"},{text:"User Type",value:"role"},{text:"Actions",value:"actions"}],I=E(()=>{const t=v.value.length;if(t===usersCount)return"Delete all items";if(t>1)return`Delete ${t} items`;if(t<=1)return`Delete ${t} item`}),L=()=>{console.log(v.value)},N=async({id:t})=>{confirm("Are you sure?")&&(await C(t),p())};return(t,o)=>{const u=g("Icon"),y=g("RouterLink"),S=g("DataTable");return n(),c("div",M,[d(h)?(n(),P(R,{key:0,type:"error"},{default:i(()=>[k(f(d(h).message),1)]),_:1})):m("",!0),r("div",O,[z,a(y,{class:"py-2 px-3 bg-emerald-500 text-white font-medium rounded-md hover:bg-emerald-400",to:{name:"add-user"}},{default:i(()=>[a(u,{name:"fa-user-plus"}),k(" New User ")]),_:1})]),r("div",F,[a(j,{type:"text",placeholder:"Search...",modelValue:s.value["filter[all]"],"onUpdate:modelValue":o[0]||(o[0]=e=>s.value["filter[all]"]=e),modelModifiers:{lazy:!0}},null,8,["modelValue"]),v.value.length?(n(),c("button",{key:0,class:"bg-green-500 text-slate-50 py-1 px-3 rounded",onClick:L},f(d(I)),1)):m("",!0),r("div",q,[a(S,{"buttons-pagination":"","server-options":s.value,"onUpdate:serverOptions":o[1]||(o[1]=e=>s.value=e),loading:d(U),items:b.value,"server-items-length":x.value,headers:T,"search-value":B.value},{"item-role":i(e=>[r("div",null,f(e.roles[0].name),1)]),"item-actions":i(e=>[r("div",G,[e.roles[0].name==="Admin"?(n(),c("button",H,[a(u,{name:"fa-regular-trash-alt",scale:"0.8"})])):m("",!0),e.roles[0].name==="User"?(n(),c("button",{key:1,class:"border-2 border-red-300 p-1 rounded text-red-500 hover:bg-red-200 disabled:border-gray-300 disabled:text-gray-500 disabled:hover:bg-gray-200 disabled:cursor-wait",disabled:d(D),onClick:W=>N(e)},[a(u,{name:"fa-regular-trash-alt",scale:"0.8"})],8,J)):m("",!0),a(y,{class:"border-2 border-blue-300 p-1 rounded text-blue-500 hover:bg-blue-200",to:{name:"update-user",params:{id:e.id}}},{default:i(()=>[a(u,{name:"fa-regular-edit",scale:"0.8"})]),_:2},1032,["to"])])]),_:1},8,["server-options","loading","items","server-items-length","search-value"])])])])}}};export{ee as default};
